<!DOCTYPE html>


<html lang="zh-cn" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>GRUB引导ISO镜像 - UNIXETC</title>
<meta name="description" content="A Personal Site">

<link rel="icon" type="image/x-icon" href="https://unixetc.com/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://unixetc.com/favicon.png">

<link rel="stylesheet" href="https://unixetc.com/css/light.css?rnd=1596103619" />
<style>

    [data-theme="dark"] {   
        --font-color: #eee;
--bg-color: #212121;

--link-color:#599ada;
--link-state-color:#ff5858;
--link-state-border-color: rgba(238, 54, 54, 0.5);

--thead-bg-color: #343a40;
--table-border-color: lightgrey;

--pre-color: #333;
--pre-bg-color: #f1f1f1;

--bq-color: #ccc;
--hr-color: #333;

--pagination-bg-color: #373737;
--pagination-link-color: #b6b6b6;

--post-info-color: grey;

--switcher-color: #333;
--switcher-bg-color: #fff;

    }

</style>

<link rel="stylesheet" href="https://unixetc.com/css/style.css?rnd=1596103619" />





<meta property="og:title" content="GRUB引导ISO镜像" />
<meta property="og:description" content="家里电脑安装了双系统(Xubuntu&#43;Windows7)，平时一直不关机，开着TeamViewer便于在办公室远程操作。
这次不知怎么回事儿，远程掉了，回家一看Windows意外关机，再开机直接蓝屏。
由于为了省资源，关闭了系统保护，没法进行还原，多次试着拯救都没能解决，无限蓝屏……
手头刚好没有WinPE的U盘，没法ghost恢复或重装Windows，只有xubuntu可用，一筹莫展。
突然想到grub是否可以引导iso？ 网上找了下，还真可以，于是下载了个WinPE镜像文件，打算通过grub来引导以修复Windows。
具体操作如下：
安装grub-imageboot
alair@e6440:~$ apt search memdisk 正在排序... 完成 全文搜索... 完成 grub-imageboot/bionic,bionic 0.6 all boot iso, harddisk and floppy images with grub2 and syslinux memdisk alair@e6440:~$ sudo apt install grub-imageboot [sudo] alair 的密码： 正在读取软件包列表... 完成 正在分析软件包的依赖关系树 正在读取状态信息... 完成 将会同时安装下列软件： syslinux-common 下列【新】软件包将被安装： grub-imageboot syslinux-common 升级了 0 个软件包，新安装了 2 个软件包，要卸载 0 个软件包，有 4 个软件包未被升级。 需要下载 1,176 kB 的归档。 解压缩后会消耗 3,684 kB 的额外空间。 您希望继续执行吗？ [Y/n] y 获取:1 http://mirrors.cqu.edu.cn/ubuntu bionic/main amd64 syslinux-common all 3:6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://unixetc.com/post/grub-boot-iso-image-file/" />
<meta property="article:published_time" content="2018-07-08T17:18:00+00:00" />
<meta property="article:modified_time" content="2018-07-08T17:18:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="GRUB引导ISO镜像"/>
<meta name="twitter:description" content="家里电脑安装了双系统(Xubuntu&#43;Windows7)，平时一直不关机，开着TeamViewer便于在办公室远程操作。
这次不知怎么回事儿，远程掉了，回家一看Windows意外关机，再开机直接蓝屏。
由于为了省资源，关闭了系统保护，没法进行还原，多次试着拯救都没能解决，无限蓝屏……
手头刚好没有WinPE的U盘，没法ghost恢复或重装Windows，只有xubuntu可用，一筹莫展。
突然想到grub是否可以引导iso？ 网上找了下，还真可以，于是下载了个WinPE镜像文件，打算通过grub来引导以修复Windows。
具体操作如下：
安装grub-imageboot
alair@e6440:~$ apt search memdisk 正在排序... 完成 全文搜索... 完成 grub-imageboot/bionic,bionic 0.6 all boot iso, harddisk and floppy images with grub2 and syslinux memdisk alair@e6440:~$ sudo apt install grub-imageboot [sudo] alair 的密码： 正在读取软件包列表... 完成 正在分析软件包的依赖关系树 正在读取状态信息... 完成 将会同时安装下列软件： syslinux-common 下列【新】软件包将被安装： grub-imageboot syslinux-common 升级了 0 个软件包，新安装了 2 个软件包，要卸载 0 个软件包，有 4 个软件包未被升级。 需要下载 1,176 kB 的归档。 解压缩后会消耗 3,684 kB 的额外空间。 您希望继续执行吗？ [Y/n] y 获取:1 http://mirrors.cqu.edu.cn/ubuntu bionic/main amd64 syslinux-common all 3:6."/>








    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <h1 class="site-title">
    <a href="/">UNIXETC</a>
</h1>
<nav>
    
    
    <a class="" href="https://unixetc.com/tags/" title="">Tags</a>
    
    <a class="" href="https://unixetc.com/readme/" title="ReadMe">Readme</a>
    
</nav>

            
        </header>
        <main id="main" tabindex="-1"> 
            
    
    
    <article class="post">
        <header class="post-header">
            <h1 class="post-title">GRUB引导ISO镜像</h1>
        </header>
        <div class="content">
            <p>家里电脑安装了双系统(Xubuntu+Windows7)，平时一直不关机，开着TeamViewer便于在办公室远程操作。</p>
<p>这次不知怎么回事儿，远程掉了，回家一看Windows意外关机，再开机直接蓝屏。</p>
<p>由于为了省资源，关闭了系统保护，没法进行还原，多次试着拯救都没能解决，无限蓝屏……</p>
<p>手头刚好没有WinPE的U盘，没法ghost恢复或重装Windows，只有xubuntu可用，一筹莫展。</p>
<p>突然想到grub是否可以引导iso？ 网上找了下，还真可以，于是下载了个WinPE镜像文件，打算通过grub来引导以修复Windows。</p>
<p>具体操作如下：</p>
<p>安装<strong>grub-imageboot</strong></p>
<pre><code>alair@e6440:~$ apt search memdisk
正在排序... 完成
全文搜索... 完成  
grub-imageboot/bionic,bionic 0.6 all
boot iso, harddisk and floppy images with grub2 and syslinux memdisk

alair@e6440:~$ sudo apt install grub-imageboot
[sudo] alair 的密码： 
正在读取软件包列表... 完成
正在分析软件包的依赖关系树       
正在读取状态信息... 完成       
将会同时安装下列软件：
syslinux-common
下列【新】软件包将被安装：
grub-imageboot syslinux-common
升级了 0 个软件包，新安装了 2 个软件包，要卸载 0 个软件包，有 4 个软件包未被升级。
需要下载 1,176 kB 的归档。
解压缩后会消耗 3,684 kB 的额外空间。
您希望继续执行吗？ [Y/n] y
获取:1 http://mirrors.cqu.edu.cn/ubuntu bionic/main amd64 syslinux-common all 3:6.03+dfsg1-2 [1,171 kB]
获取:2 http://mirrors.cqu.edu.cn/ubuntu bionic/universe amd64 grub-imageboot all 0.6 [4,424 B]
已下载 1,176 kB，耗时 1秒 (1,947 kB/s)
正在选中未选择的软件包 syslinux-common。
(正在读取数据库 ... 系统当前共安装有 181845 个文件和目录。)
正准备解包 .../syslinux-common_3%3a6.03+dfsg1-2_all.deb  ...
正在解包 syslinux-common (3:6.03+dfsg1-2) ...
正在选中未选择的软件包 grub-imageboot。
正准备解包 .../grub-imageboot_0.6_all.deb  ...
正在解包 grub-imageboot (0.6) ...
正在设置 syslinux-common (3:6.03+dfsg1-2) ...
正在设置 grub-imageboot (0.6) ...
Copy syslinux memdisk to /boot/memdisk
alair@e6440:~$ 
</code></pre>
<p>下载WinPE镜像文件(efi.iso)，拷贝至<code>/boot/</code>目录</p>
<pre><code>alair@e6440:~$sudo cp efi.iso /boot/
</code></pre>
<p>编辑<code>/etc/grub.d/40_custom</code>文件，加入以下内容：</p>
<pre><code>menuentry &quot;WinPE&quot; { 
linux16 /boot/memdisk iso raw
initrd16 /boot/efi.iso
}
</code></pre>
<p>运行<code>sudo update-grub</code>使设置生效，完成后重启时grub中会出现<strong>WinPE</strong>菜单，选择该项则加载自定义winpe镜像，下来就在WinPE下恢复Windows系统咯!!!</p>

        </div>
        


<div class="post-info">
    
        <div class="post-date">2018-07-08</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/windows">#Windows</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub">#GRUB</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub-imageboot">#grub-imageboot</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub2">#grub2</a></li>
                    
                        <li><a href="https://unixetc.com/tags/memdisk">#memdisk</a></li>
                    
                        <li><a href="https://unixetc.com/tags/iso">#ISO</a></li>
                    
                        <li><a href="https://unixetc.com/tags/winpe">#WinPE</a></li>
                    
                        <li><a href="https://unixetc.com/tags/update-grub">#update-grub</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>

    

    


        </main>
        
            <footer class="common-footer">
    
    

    <div class="copyright">
        <p>© Alair, 2020<br>
        Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.CDN by <a href="https://dwz.cn/juw2S2At" target="_blank">Qiniu</a>,Host by <a href="https://dwz.cn/CdAD0bNi" target="_blank">BWG</a>.<script type="text/javascript" src="//js.users.51.la/20892031.js"></script>
        </p>  
    </div> 

    


    
</footer>

        
    </div>
</body>
</html>
