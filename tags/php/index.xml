<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>php on UNIXETC</title>
    <link>https://unixetc.com/tags/php/</link>
    <description>UNIXETC (php)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 03 Oct 2017 10:03:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/php/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Typecho登录时提示AccessDenied</title>
      <link>https://unixetc.com/post/typecho-login-access-denied/</link>
      <pubDate>Tue, 03 Oct 2017 10:03:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-login-access-denied/</guid>
      <description>&lt;p&gt;Typecho安装完成后，登录后提示Access Denied，解决方法如下：&lt;/p&gt;
&lt;p&gt;找到&lt;strong&gt;php.ini&lt;/strong&gt;文件，我的在&lt;code&gt;/usr/local/php/etc/php.ini&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;将&lt;code&gt;cgi.fix_pathinfo&lt;/code&gt;的值改为&lt;strong&gt;1&lt;/strong&gt;即可&lt;/p&gt;
&lt;p&gt;重启php&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service php-fpm restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;完了！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>将博客从Typcho转移至Gor</title>
      <link>https://unixetc.com/post/typecho-converted-to-gor/</link>
      <pubDate>Mon, 20 Jul 2015 17:20:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-converted-to-gor/</guid>
      <description>&lt;h3 id=&#34;缘由&#34;&gt;缘由&lt;/h3&gt;
&lt;p&gt;VPS快到期了，不想继续维护，太累，并且香港VPS价格也不菲。&lt;/p&gt;
&lt;p&gt;于是打算选择一个静态博客平台，原来用过的不少:jekyll,hexo,gor,pelican，最后决定Gor&lt;/p&gt;
&lt;p&gt;选择Gor的理由有两点&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;安装方便&lt;/li&gt;
&lt;li&gt;执行效率高&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;安装gor&#34;&gt;安装Gor&lt;/h3&gt;
&lt;p&gt;参考Gor主页&lt;a href=&#34;https://github.com/wendal/gor&#34;&gt;https://github.com/wendal/gor&lt;/a&gt;安装Gor&lt;/p&gt;
&lt;h3 id=&#34;将typecho文章导出为markdown文件md&#34;&gt;将Typecho文章导出为Markdown文件(.md)&lt;/h3&gt;
&lt;p&gt;Github上有现成的工具&lt;strong&gt;typecho-exporter&lt;/strong&gt;，主页为&lt;a href=&#34;https://github.com/aneasystone/typecho-exporter&#34;&gt;https://github.com/aneasystone/typecho-exporter&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这个工具可以将所有的文章导出为Markdown文件，但是以文章标题为文件名，不利于后期处理，建议使用slug为文件名。&lt;/p&gt;
&lt;p&gt;编辑下载的&lt;code&gt;main.py&lt;/code&gt;，将75行的&lt;code&gt;p.title = r[1]&lt;/code&gt;替换为`p.title = r[2]&#39;，如下:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;results = cur.fetchall()
for r in results:
    p = Post()
    p.id = r[0]
    p.title = r[2]
    p.content = r[5]
    posts.append(p)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;原来的&lt;code&gt;r[1]&lt;/code&gt;对应&lt;code&gt;typecho_contents&lt;/code&gt;SQL表中的&lt;code&gt;title&lt;/code&gt;列，我的&lt;code&gt;r[2]&lt;/code&gt;对应&lt;code&gt;slug&lt;/code&gt;列，可以根据实际情况更改。&lt;/p&gt;
&lt;p&gt;编辑&lt;strong&gt;typecho-exporter&lt;/strong&gt;的&lt;code&gt;config.ini&lt;/code&gt;文件，设置数据库访问方式。&lt;/p&gt;
&lt;p&gt;运行&lt;code&gt;main.py&lt;/code&gt;，完成后会在&lt;strong&gt;typecho-exporter&lt;/strong&gt;目录下生成&lt;strong&gt;files&lt;/strong&gt;文件夹，里面就是导出的Markdown文件。&lt;/p&gt;
&lt;h3 id=&#34;后期整理&#34;&gt;后期整理&lt;/h3&gt;
&lt;p&gt;导出后的Markdown没有Gor需要的文件头格式，需要手动整理&lt;/p&gt;
&lt;p&gt;这里推荐使用Notepad++批量替换&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/insert_gor_markdown_header.png&#34; alt=&#34;插入Hexo的Markdown头格式&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;查找目标:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;替换为&amp;mdash;\n
title: title\ndate: 2015-07-20\ndescription: \npermalink: \ncategories: \ntags: \n&amp;mdash;\n&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;记得将查找模式重的扩展打开。&lt;/p&gt;
&lt;p&gt;经过以上替换，就大概有了个Gor的Markdown头格式，后面的手动工作就少了多了。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>typecho主题Amaze</title>
      <link>https://unixetc.com/post/typecho-theme-amaze/</link>
      <pubDate>Fri, 17 Jul 2015 21:23:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-theme-amaze/</guid>
      <description>&lt;p&gt;typecho主题一枚Amaze,采用Amaze UI框架&lt;/p&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;评论采用多说,直接替换comment.php内容&lt;/li&gt;
&lt;li&gt;无页面导航，请将文章数设为999&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;预览图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/typecho_amaze.webp&#34; alt=&#34;Typecho主题Amaze预览图&#34;&gt;&lt;/p&gt;
&lt;p&gt;下载地址:&lt;a href=&#34;http://cdn.lyq.wiki/res/amaze.7z&#34;&gt;http://cdn.lyq.wiki/res/amaze.7z&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Typecho主题Limits</title>
      <link>https://unixetc.com/post/typecho-limits-theme/</link>
      <pubDate>Thu, 02 Jul 2015 17:32:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-limits-theme/</guid>
      <description>&lt;p&gt;又造了个简单成马咧的主题，分享给大家!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;说明&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;评论采用多说，请自行替换comments.php内容&lt;/li&gt;
&lt;li&gt;没有页面导航，因此请在&lt;strong&gt;设置-阅读&lt;/strong&gt;中，将&lt;strong&gt;每页文章数目&lt;/strong&gt;设大一些(例如:&lt;strong&gt;999&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;预览图:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/typecho_limits.png&#34; alt=&#34;Limits主题&#34;&gt;&lt;/p&gt;
&lt;p&gt;下载: &lt;a href=&#34;http://cdn.lyq.wiki/res/limits.7z&#34;&gt;Limits.7z&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Typecho主题Read</title>
      <link>https://unixetc.com/post/typecho-theme-read/</link>
      <pubDate>Thu, 21 May 2015 15:23:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-theme-read/</guid>
      <description>&lt;p&gt;闲暇时参考&lt;a href=&#34;http://www.yinwang.org/&#34;&gt;http://www.yinwang.org/&lt;/a&gt;修改制作了一个Typecho主题，命名为Read，分享给大家！&lt;/p&gt;
&lt;p&gt;预览图:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/read_review.webp&#34; alt=&#34;Read&#34;&gt;&lt;/p&gt;
&lt;p&gt;下载地址:&lt;a href=&#34;http://cdn.lyq.wiki/res/read_theme.zip&#34;&gt;read.zip&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Typecho主题aquan</title>
      <link>https://unixetc.com/post/typecho-theme-aquan/</link>
      <pubDate>Tue, 24 Jun 2014 12:23:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-theme-aquan/</guid>
      <description>&lt;p&gt;最近恢复了博客，弄了个新皮亮相，欢迎大家围观！&lt;/p&gt;
&lt;p&gt;名称:aquan
平台:typecho
预览图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/aquan_review.webp&#34; alt=&#34;aquan&#34;&gt;&lt;/p&gt;
&lt;p&gt;下载 &lt;a href=&#34;http://cdn.lyq.wiki/res/aquan_theme.zip&#34;&gt;aquan_theme.zip&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Typecho主题Logs</title>
      <link>https://unixetc.com/post/typecho-theme-logs/</link>
      <pubDate>Mon, 23 Dec 2013 21:23:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/typecho-theme-logs/</guid>
      <description>&lt;p&gt;弄了个Typecho主题，名为&lt;strong&gt;Logs&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;预览:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/logs_review.webp&#34; alt=&#34;Logs&#34;&gt;&lt;/p&gt;
&lt;p&gt;基本完善，有个别可能需要小修改，先贴出来分享给看得上的人&lt;/p&gt;
&lt;p&gt;本站就是使用的这个主题，所以就不贴预览图了&lt;/p&gt;
&lt;p&gt;Update 2014/01/02&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;边栏添加搜索框&lt;/li&gt;
&lt;li&gt;优化一些代码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Update 2013/12/25&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;修改导航栏UI&lt;/li&gt;
&lt;li&gt;启用友链插件，更改友链以及广告链接输出方式，友链插件地址&lt;a href=&#34;http://www.imhan.com/archives/typecho-links/&#34;&gt;http://www.imhan.com/archives/typecho-links/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Update 2013/12/22&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;评论ui完善&lt;/li&gt;
&lt;li&gt;添加favicon.ico&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下载 &lt;a href=&#34;https://dotbbq.pipipan.com/dir/18418398-34172445-2a9b98/&#34;&gt;Logs1.1.zip&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>LNMP使用实例</title>
      <link>https://unixetc.com/post/lnmp-usages/</link>
      <pubDate>Fri, 23 Mar 2012 12:32:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/lnmp-usages/</guid>
      <description>&lt;h3 id=&#34;安装lnmp&#34;&gt;安装LNMP&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;更新系统&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#yum check-update
#yum update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;安装Screen&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#yum install screen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;开始安装Lnmp&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#screen -S lnmp
#wget -c http://soft.vpser.net/lnmp/lnmp0.8.tar.gz //最新版请查阅lnmp官网
#tar zxvf lnmp0.8.tar.gz
#./lnmp0.8/centos.sh | tee lnmp.log //输出log文件，以备出错时查阅
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下来按照提示设定域名和MysQL密码，程序会自动下载相关程序，而后编译安装&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;安装PureFTP&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#./lnmp0.8/pureftp.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;按提示输入MySQL和Ftp管理员密码，安装完成后可以通过&lt;code&gt;http://vpsip/ftp/&lt;/code&gt;来登录管理ftp帐号&lt;/p&gt;
&lt;h3 id=&#34;使用lnmp&#34;&gt;使用Lnmp&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;添加虚拟主机&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#/root/vhost.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;按照提示填入域名、目录、rewrite规则文件，如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@buyvm256:~#/root/vhost.sh
=========================================================================
Add Virtual Host for LNMP V0.9  ,  Written by Licess 
=========================================================================
LNMP is a tool to auto-compile &amp;amp; install Nginx+MySQL+PHP on Linux 
This script is a tool to add virtual host for nginx 
For more information please visit http://www.lnmp.org/

=========================================================================
Please input domain:  //添加域名
(Default domain: www.lnmp.org):xxx.com
===========================
domain=xxx.com
===========================
Do you want to add more domain name? (y/n)  //添加更多域名
y
Type domainname,example(bbs.vpser.net forums.vpser.net luntan.vpser.net):
www.xxx.com
===========================
domain list=www.xxx.com
===========================
Please input the directory for the domain:xxx.com :  //网站目录
(Default directory: /home/wwwroot/xxx.com):
===========================
Virtual Host Directory=/home/wwwroot/xxx.com
===========================
===========================
Allow Rewrite rule? (y/n)  //重写规则
===========================
y
Please input the rewrite of programme :
wordpress,discuz,typecho,sablog,dabr rewrite was exist.
(Default rewrite: other):wordpress  //选择重写规则
===========================
You choose rewrite=wordpress
===========================
===========================
Allow access_log? (y/n)  //是否记录log
===========================
n

Press any key to start create virtul host...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后，登录&lt;code&gt;http://vpsip/ftp/&lt;/code&gt;添加ftp帐号，&lt;code&gt;http://vpsip/phpmyadmin/&lt;/code&gt;编辑数据库&lt;/p&gt;
&lt;p&gt;**注意：**开通ftp时，记着添加到www用户组&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修改虚拟主机配置&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;创建好的虚拟主机，配置文件目录为/wp-content/local/nginx/conf/vhost/，文件名为domain.conf，如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aquan@buyvm256:~$ cat /usr/local/nginx/conf/vhost/xxx.com.conf 

server
        {
                listen       80;   //端口
                server_name xxx.com www.xxx.com;   //域名
                index index.html index.htm index.php default.html default.htm default.php;  //索引文件
                root  /home/wwwroot/xxx.com;   //目录

                include wordpress.conf;
                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                access_log off;
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;主机配置文件修改后，使用如下命令重新加载配置使之生效&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#/etc/init.d/nginx reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;删除虚拟主机&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;删除/wp-content/local/nginx/conf/vhost/下对应配置文件(.conf)，再删除/home/wwwroot/下的本地目录&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一些其他问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;设置虚拟主机目录权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#chown -R www /home/wwwroot/vps.aotee.com
#chmod -R 777 /home/wwwroot/vps.aotee.com&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>