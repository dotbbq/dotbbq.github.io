<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ftp on UNIXETC</title>
    <link>https://unixetc.com/tags/ftp/</link>
    <description>UNIXETC (ftp)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 01 Apr 2016 14:21:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/ftp/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>LFTP使用实例</title>
      <link>https://unixetc.com/post/lftp-use-case/</link>
      <pubDate>Fri, 01 Apr 2016 14:21:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/lftp-use-case/</guid>
      <description>&lt;h3 id=&#34;lftp介绍&#34;&gt;LFTP介绍&lt;/h3&gt;
&lt;p&gt;lftp是一个功能强大的ftp/http客户端，作者是 Alexander Lukyanov。&lt;/p&gt;
&lt;p&gt;lftp支持多种传输协议，如ftp、http、https、sftp、exp等。&lt;/p&gt;
&lt;p&gt;如同BASH一样，lftp支持任务管理。并且具备书签管理、内置镜像和多线程传送功能。&lt;/p&gt;
&lt;h3 id=&#34;使用lftp&#34;&gt;使用LFTP&lt;/h3&gt;
&lt;h4 id=&#34;登录服务器&#34;&gt;登录服务器&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;lftp ftp://user:password@ip:port
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上是一个完整的lftp登录示例，其中包含协议(ftp)、用户名(user)、密码(password)、主机(ip)以及端口(port)&lt;/p&gt;
&lt;p&gt;默认情况下lftp直接访问ftp服务，默认登录端口为22，因此我们可以使用以下方法来便捷登录主机&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp user@ip
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后系统会提示输入&lt;strong&gt;password&lt;/strong&gt;，完成后登录成功！&lt;/p&gt;
&lt;h4 id=&#34;lftp命令行参数&#34;&gt;lftp命令行参数&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;lftp :~&amp;gt; help
    !&amp;lt;shell-command&amp;gt;                     (commands)
    alias [&amp;lt;name&amp;gt; [&amp;lt;value&amp;gt;]]             attach [PID]
    bookmark [SUBCMD]                    cache [SUBCMD]
    cat [-b] &amp;lt;files&amp;gt;                     cd &amp;lt;rdir&amp;gt;
    chmod [OPTS] mode file...            close [-a]
    [re]cls [opts] [path/][pattern]      debug [&amp;lt;level&amp;gt;|off] [-o &amp;lt;file&amp;gt;]
    du [options] &amp;lt;dirs&amp;gt;                  exit [&amp;lt;code&amp;gt;|bg]
    get [OPTS] &amp;lt;rfile&amp;gt; [-o &amp;lt;lfile&amp;gt;]      glob [OPTS] &amp;lt;cmd&amp;gt; &amp;lt;args&amp;gt;
    help [&amp;lt;cmd&amp;gt;]                         history -w file|-r file|-c|-l [cnt]
    jobs [-v] [&amp;lt;job_no...&amp;gt;]              kill all|&amp;lt;job_no&amp;gt;
    lcd &amp;lt;ldir&amp;gt;                           lftp [OPTS] &amp;lt;site&amp;gt;
    ln [-s] &amp;lt;file1&amp;gt; &amp;lt;file2&amp;gt;              ls [&amp;lt;args&amp;gt;]
    mget [OPTS] &amp;lt;files&amp;gt;                  mirror [OPTS] [remote [local]]
    mkdir [-p] &amp;lt;dirs&amp;gt;                    module name [args]
    more &amp;lt;files&amp;gt;                         mput [OPTS] &amp;lt;files&amp;gt;
    mrm &amp;lt;files&amp;gt;                          mv &amp;lt;file1&amp;gt; &amp;lt;file2&amp;gt;
    [re]nlist [&amp;lt;args&amp;gt;]                   open [OPTS] &amp;lt;site&amp;gt;
    pget [OPTS] &amp;lt;rfile&amp;gt; [-o &amp;lt;lfile&amp;gt;]     put [OPTS] &amp;lt;lfile&amp;gt; [-o &amp;lt;rfile&amp;gt;]
    pwd [-p]                             queue [OPTS] [&amp;lt;cmd&amp;gt;]
    quote &amp;lt;cmd&amp;gt;                          repeat [OPTS] [delay] [command]
    rm [-r] [-f] &amp;lt;files&amp;gt;                 rmdir [-f] &amp;lt;dirs&amp;gt;
    scache [&amp;lt;session_no&amp;gt;]                set [OPT] [&amp;lt;var&amp;gt; [&amp;lt;val&amp;gt;]]
    site &amp;lt;site-cmd&amp;gt;                      source &amp;lt;file&amp;gt;
    torrent [-O &amp;lt;dir&amp;gt;] &amp;lt;file|URL&amp;gt;...     user &amp;lt;user|URL&amp;gt; [&amp;lt;pass&amp;gt;]
    wait [&amp;lt;jobno&amp;gt;]                       zcat &amp;lt;files&amp;gt;
    zmore &amp;lt;files&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;常用的命令解释如下：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;远端操作&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ls 显示远端目录列表&lt;/li&gt;
&lt;li&gt;cd 切换远端目录&lt;/li&gt;
&lt;li&gt;get 下载文件&lt;/li&gt;
&lt;li&gt;put 上传文件&lt;/li&gt;
&lt;li&gt;mv 移动远端文件&lt;/li&gt;
&lt;li&gt;rm 删除远端文件&lt;/li&gt;
&lt;li&gt;pwd 显示远端目录&lt;/li&gt;
&lt;li&gt;du 计算远端目录大小&lt;/li&gt;
&lt;li&gt;退出&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;本地操作&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;!ls 显示本地目录列表&lt;/li&gt;
&lt;li&gt;lcd 切换本地目录&lt;/li&gt;
&lt;li&gt;lpwd 显示本地目录&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;lftp使用范例&#34;&gt;LFTP使用范例&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;登录服务器&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@hostus:~# lftp qxu1128@qxu1128.my3w.com
Password:
lftp qxu1128@qxu1128.my3w.com:~&amp;gt; ls
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;列出服务器目录文件&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/&amp;gt; ls
drwxr-xr-x    2 0        0            4096 Jan 23  2015 backup
drwxr-xr-x    2 675      100          4096 Jan 23  2015 cgi-bin
drwxr-xr-x    2 0        0            4096 Apr 01 03:40 ftplogs
drwxr-xr-x    4 675      100          4096 Apr 01 11:02 htdocs
drwxr-xr-x    2 675      100          4096 Jan 23  2015 myfolder
drwxr-xr-x    2 0        0            4096 Apr 01 02:03 wwwlogs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;切换远端目录&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/&amp;gt; cd htdocs/
lftp qxu1128@qxu1128.my3w.com:/htdocs&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;上传文件&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/htdocs&amp;gt; put tb7302.apk
`tb7302.apk&#39; at 1913856 (24%) 77.7K/s eta:75s [Sending data]

7713808 bytes transferred in 78 seconds (97.0K/s)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;下载文件&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/htdocs&amp;gt; get bk.apk
`bk.apk&#39; at 124528 (1%) 28.1K/s eta:4m [Receiving data]

7713808 bytes transferred in 519 seconds (14.5K/s)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;上传文件夹&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/htdocs&amp;gt; mirror -R bootstrap/
Total: 4 directories, 14 files, 0 symlinks
New: 14 files, 0 symlinks
1079609 bytes transferred in 7 seconds (150.7 KiB/s)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;下载文件夹&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/htdocs&amp;gt; mirror bootstrap/ new
Total: 4 directories, 14 files, 0 symlinks
New: 14 files, 0 symlinks
1079609 bytes transferred in 6 seconds (189.9 KiB/s)
lftp qxu1142380172@qxu1142380172.my3w.com:/htdocs&amp;gt; !ls new/
css  fonts  js
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;中文乱码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;有时由于编码问题，我们看到的中文可能是乱码，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/&amp;gt; ls
drwxr-xr-x    2 0        0            4096 Jan 23  2015 backup
drwxr-xr-x    2 675      100          4096 Jan 23  2015 cgi-bin
drwxr-xr-x    2 0        0            4096 Apr 01 03:40 ftplogs
drwxr-xr-x    4 675      100          4096 Apr 01 11:02 htdocs
drwxr-xr-x    2 675      100          4096 Jan 23  2015 myfolder
drwxr-xr-x    2 0        0            4096 Apr 01 02:03 wwwlogs
-r-xr--r--    1 55961    100           606 Aug 31  2015 ▒▒▒ȶ▒▒▒.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果出现这种情况，就需要进行编码设置，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/&amp;gt; set ftp:charset GBK
lftp qxu1128@qxu1128.my3w.com:/&amp;gt; set file:charset UTF-8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;设置完成后再看：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp qxu1128@qxu1128.my3w.com:/&amp;gt; ls
drwxr-xr-x    2 0        0            4096 Jan 23  2015 backup
drwxr-xr-x    2 675      100          4096 Jan 23  2015 cgi-bin
drwxr-xr-x    2 0        0            4096 Apr 01 03:40 ftplogs
drwxr-xr-x    4 675      100          4096 Apr 01 11:33 htdocs
drwxr-xr-x    2 675      100          4096 Jan 23  2015 myfolder
drwxr-xr-x    2 0        0            4096 Apr 01 02:03 wwwlogs
-r-xr--r--    1 55961    100           606 Aug 31  2015 请先读我.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上两条&lt;strong&gt;set&lt;/strong&gt;命令可以写入lftp配置文件，以方便以后使用，关于lftp配置文件参考下节介绍。&lt;/p&gt;
&lt;h4 id=&#34;lftp书签使用方法&#34;&gt;LFTP书签使用方法&lt;/h4&gt;
&lt;p&gt;我们可以使用书签来存储一些商用的ftp登录信息，lftp的书签文件为&lt;code&gt;~/.lftp/bookmarks&lt;/code&gt;，我们可以编辑它来添加书签&lt;/p&gt;
&lt;p&gt;lftp书签格式如下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bkname ftp://user:password@ip:port
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;设置好书签后，可以使用&lt;code&gt;lftp&lt;/code&gt;加书签名来登录&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lftp bkname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;书签使用示例：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@hostus:~# cat ~/.lftp/bookmarks
aliyun ftp://qxu172@qxu150172.my3w.com
root@hostus:~# lftp aliyun
Password:
lftp qxu1128@qxu1128.my3w.com:~&amp;gt; ls
drwxr-xr-x    2 0        0            4096 Jan 23  2015 backup
drwxr-xr-x    2 675      100          4096 Jan 23  2015 cgi-bin
drwxr-xr-x    2 0        0            4096 Apr 01 03:40 ftplogs
drwxr-xr-x    4 675      100          4096 Apr 01 11:33 htdocs
drwxr-xr-x    2 675      100          4096 Jan 23  2015 myfolder
drwxr-xr-x    2 0        0            4096 Apr 01 02:03 wwwlogs
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;lftp配置文件&#34;&gt;LFTP配置文件&lt;/h3&gt;
&lt;p&gt;lftp执行配置文件顺序为&lt;code&gt;/etc/lftp.conf&lt;/code&gt;、&lt;code&gt;~/.lftprc&lt;/code&gt;、&lt;code&gt;~/.lftp/rc&lt;/code&gt;，我们可以编辑这些修改这些文件，来达到全局配置或者用户自定义配置。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;set&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在设置文件中，使用set来设置一些变量的值，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;set ftp:ssl-force on
set ssl:verify-certificate on
set ftp:use-feat off
set ftp:ssl-protect-data on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;debug&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;默认情况下lftp是静默提示的，如果需要查看一些提示信息，就要对&lt;strong&gt;debug&lt;/strong&gt;进行设置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;debug 5 显示所有调试信息&lt;/li&gt;
&lt;li&gt;debug 3 仅显示欢迎信息和错误信息&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;alias&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;定义命令别名，比如为ls设置别名dir以方便个人使用习惯，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;alias dir ls
alias less more
alias zless zmore
alias bzless bzmore
alias reconnect &amp;quot;close; cache flush; cd .&amp;quot;
alias edit &amp;quot;eval -f &amp;quot;get $0 -o ~/.lftp/edit.tmp.$$ &amp;amp;&amp;amp; shell \\&amp;quot;cp -p ~/.lftp/edit.tmp.$$ ~/.lftp/edit.tmp.$$.orig &amp;amp;&amp;amp; vim ~/.lftp/edit.tmp.$$ &amp;amp;&amp;amp; test ~/.lftp/edit.tmp.$$ -nt ~/.lftp/edit.tmp.$$.orig\\&amp;quot; &amp;amp;&amp;amp; put ~/.lftp/edit.tmp.$$ -o $0; shell rm -f ~/.lftp/edit.tmp.$$*&amp;quot;&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>LNMP使用实例</title>
      <link>https://unixetc.com/post/lnmp-usages/</link>
      <pubDate>Fri, 23 Mar 2012 12:32:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/lnmp-usages/</guid>
      <description>&lt;h3 id=&#34;安装lnmp&#34;&gt;安装LNMP&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;更新系统&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#yum check-update
#yum update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;安装Screen&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#yum install screen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;开始安装Lnmp&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#screen -S lnmp
#wget -c http://soft.vpser.net/lnmp/lnmp0.8.tar.gz //最新版请查阅lnmp官网
#tar zxvf lnmp0.8.tar.gz
#./lnmp0.8/centos.sh | tee lnmp.log //输出log文件，以备出错时查阅
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下来按照提示设定域名和MysQL密码，程序会自动下载相关程序，而后编译安装&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;安装PureFTP&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#./lnmp0.8/pureftp.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;按提示输入MySQL和Ftp管理员密码，安装完成后可以通过&lt;code&gt;http://vpsip/ftp/&lt;/code&gt;来登录管理ftp帐号&lt;/p&gt;
&lt;h3 id=&#34;使用lnmp&#34;&gt;使用Lnmp&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;添加虚拟主机&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#/root/vhost.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;按照提示填入域名、目录、rewrite规则文件，如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@buyvm256:~#/root/vhost.sh
=========================================================================
Add Virtual Host for LNMP V0.9  ,  Written by Licess 
=========================================================================
LNMP is a tool to auto-compile &amp;amp; install Nginx+MySQL+PHP on Linux 
This script is a tool to add virtual host for nginx 
For more information please visit http://www.lnmp.org/

=========================================================================
Please input domain:  //添加域名
(Default domain: www.lnmp.org):xxx.com
===========================
domain=xxx.com
===========================
Do you want to add more domain name? (y/n)  //添加更多域名
y
Type domainname,example(bbs.vpser.net forums.vpser.net luntan.vpser.net):
www.xxx.com
===========================
domain list=www.xxx.com
===========================
Please input the directory for the domain:xxx.com :  //网站目录
(Default directory: /home/wwwroot/xxx.com):
===========================
Virtual Host Directory=/home/wwwroot/xxx.com
===========================
===========================
Allow Rewrite rule? (y/n)  //重写规则
===========================
y
Please input the rewrite of programme :
wordpress,discuz,typecho,sablog,dabr rewrite was exist.
(Default rewrite: other):wordpress  //选择重写规则
===========================
You choose rewrite=wordpress
===========================
===========================
Allow access_log? (y/n)  //是否记录log
===========================
n

Press any key to start create virtul host...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后，登录&lt;code&gt;http://vpsip/ftp/&lt;/code&gt;添加ftp帐号，&lt;code&gt;http://vpsip/phpmyadmin/&lt;/code&gt;编辑数据库&lt;/p&gt;
&lt;p&gt;**注意：**开通ftp时，记着添加到www用户组&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修改虚拟主机配置&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;创建好的虚拟主机，配置文件目录为/wp-content/local/nginx/conf/vhost/，文件名为domain.conf，如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aquan@buyvm256:~$ cat /usr/local/nginx/conf/vhost/xxx.com.conf 

server
        {
                listen       80;   //端口
                server_name xxx.com www.xxx.com;   //域名
                index index.html index.htm index.php default.html default.htm default.php;  //索引文件
                root  /home/wwwroot/xxx.com;   //目录

                include wordpress.conf;
                location ~ .*\.(php|php5)?$
                        {
                                try_files $uri =404;
                                fastcgi_pass  unix:/tmp/php-cgi.sock;
                                fastcgi_index index.php;
                                include fcgi.conf;
                        }

                location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
                        {
                                expires      30d;
                        }

                location ~ .*\.(js|css)?$
                        {
                                expires      12h;
                        }

                access_log off;
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;主机配置文件修改后，使用如下命令重新加载配置使之生效&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#/etc/init.d/nginx reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;删除虚拟主机&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;删除/wp-content/local/nginx/conf/vhost/下对应配置文件(.conf)，再删除/home/wwwroot/下的本地目录&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;一些其他问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;设置虚拟主机目录权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#chown -R www /home/wwwroot/vps.aotee.com
#chmod -R 777 /home/wwwroot/vps.aotee.com&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>