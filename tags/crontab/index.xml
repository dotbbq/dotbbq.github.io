<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>crontab on UNIXETC</title>
    <link>https://unixetc.com/tags/crontab/</link>
    <description>UNIXETC (crontab)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Mon, 22 Sep 2014 19:22:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/crontab/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>CentOS中Crontab安装和使用</title>
      <link>https://unixetc.com/post/install-crontab-on-centos-and-usage/</link>
      <pubDate>Mon, 22 Sep 2014 19:22:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/install-crontab-on-centos-and-usage/</guid>
      <description>&lt;h4 id=&#34;安装crontab&#34;&gt;安装crontab:&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;[root@CentOS ~]# yum install vixie-cron
[root@CentOS ~]# yum install crontabs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;说明：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;vixie-cron软件包是cron的主程序；&lt;/li&gt;
&lt;li&gt;crontabs软件包是用来安装、卸装、或列举用来驱动 cron 守护进程的表格的程序。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;cron 是linux的内置服务，但它不自动起来，可以用以下的方法启动、关闭这个服务：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/sbin/service crond start //启动服务
/sbin/service crond stop //关闭服务
/sbin/service crond restart //重启服务
/sbin/service crond reload //重新载入配置
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看crontab服务状态：&lt;code&gt;service crond status&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;手动启动crontab服务：&lt;code&gt;service crond start&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;查看crontab服务是否已设置为开机启动，执行命令：&lt;code&gt;ntsysv&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;加入开机自动启动:&lt;code&gt;chkconfig --level 35 crond on&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;rontab命令&#34;&gt;rontab命令&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;功能说明：&lt;/strong&gt;
设置计时器。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;语法：&lt;/strong&gt;
crontab [-u &amp;lt;用户名称&amp;gt;][配置文件] 或 crontab [-u &amp;lt;用户名称&amp;gt;][-elr]&lt;/p&gt;
&lt;h4 id=&#34;补充说明&#34;&gt;补充说明：&lt;/h4&gt;
&lt;p&gt;cron是一个常驻服务，它提供计时器的功能，让用户在特定的时间得以执行预设的指令或程序。只要用户会编辑计时器的配置文件，就可以使用计时器的功能。其配置文件格式如下：
Minute Hour Day Month DayOFWeek Command&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参数:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;-e 　编辑该用户的计时器设置。
-l 　列出该用户的计时器设置。
-r 　删除该用户的计时器设置。
-u&amp;lt;用户名称&amp;gt; 　指定要设定计时器的用户名称。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;crontab-格式&#34;&gt;crontab 格式&lt;/h4&gt;
&lt;p&gt;基本格式 :&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;* *　 *　 *　 *　　command
分　时　日　月　周　 命令
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;第1列表示分钟1～59 每分钟用*或者 */1表示&lt;/li&gt;
&lt;li&gt;第2列表示小时1～23（0表示0点）&lt;/li&gt;
&lt;li&gt;第3列表示日期1～31&lt;/li&gt;
&lt;li&gt;第4列表示月份1～12&lt;/li&gt;
&lt;li&gt;第5列标识号星期0～6（0表示星期天）&lt;/li&gt;
&lt;li&gt;第6列要运行的命令&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;crontab文件的一些例子：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;30 21 * * * /usr/local/etc/rc.d/lighttpd restart
上面的例子表示每晚的21:30重启apache。

45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart
上面的例子表示每月1、10、22日的4 : 45重启apache。

10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart
上面的例子表示每周六、周日的1 : 10重启apache。

0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart
上面的例子表示在每天18 : 00至23 : 00之间每隔30分钟重启apache。

0 23 * * 6 /usr/local/etc/rc.d/lighttpd restart
上面的例子表示每星期六的11 : 00 pm重启apache。

* */1 * * * /usr/local/etc/rc.d/lighttpd restart
每一小时重启apache

* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart
晚上11点到早上7点之间，每隔一小时重启apache

0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart
每月的4号与每周一到周三的11点重启apache

0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart
一月一号的4点重启apache

*/30 * * * * /usr/sbin/ntpdate 210.72.145.44
每半小时同步一下时间
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;crontab命令主要参数&#34;&gt;crontab命令主要参数&lt;/h4&gt;
&lt;p&gt;　　-e ：编辑用户的crontab。&lt;/p&gt;
&lt;p&gt;　　-l　：列出用户的crontab的内容。&lt;/p&gt;
&lt;p&gt;　　-r　：删除用户的crontab的内容。&lt;/p&gt;
&lt;p&gt;　　执行crontab -e，将自动打开编辑器，你可以编辑自己的crontab文件，语法和 /etc/crontab 文件一样，不同的只是，不必再指出执行的用户，编辑后保存即可。&lt;/p&gt;
&lt;p&gt;　　crontab -l用来查看自己的crontab文件内能，crontab -r删除自己的crontab。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>VPS下自动备份文件和数据库</title>
      <link>https://unixetc.com/post/automatic-backup-files-and-database-on-vps/</link>
      <pubDate>Mon, 13 Jan 2014 01:13:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/automatic-backup-files-and-database-on-vps/</guid>
      <description>&lt;p&gt;新建脚本，名为&lt;strong&gt;autoback.sh&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#vi autoback.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;脚本(autoback.sh)内容如下:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/sh

#备份网站目录/home/www/
tar zcvf /home/backup/www$(date + &amp;quot;%Y%m%d&amp;quot;).tar.gz /home/www/*

#备份数据库 www
/usr/local/mysql/bin/mysqldump -uroot -ppassword dbname &amp;gt; /home/backup/dbname$(date +&amp;quot;%Y%m%d&amp;quot;).sql

#删除三天前的备份
cd /home/backup/
rm -f *$(date -d -3day +&amp;quot;%Y%m%d&amp;quot;)*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将脚本(autoback.sh)添加到自动执行任务列表:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#chmod +x autoback.sh
#crontab -e
59 23 * * * /root/autoback.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://db.tt/i3IUvwPq&#34; title=&#34;注册Dropbox&#34;&gt;推荐注册Dropbox&lt;/a&gt;&lt;/strong&gt;，参考**&lt;a href=&#34;https://unixetc.com/post/cli-model-of-linux-using-dropbox/&#34;&gt;Linux下CLI模式使用Dropbox&lt;/a&gt;**，将备份文件自动同步到Dropbox。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>