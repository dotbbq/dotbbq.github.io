<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>url on UNIXETC</title>
    <link>https://unixetc.com/tags/url/</link>
    <description>UNIXETC (url)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 13 Aug 2017 23:23:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/url/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>sitemap-generators使用实例</title>
      <link>https://unixetc.com/post/sitemap-generators-usage/</link>
      <pubDate>Sun, 13 Aug 2017 23:23:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/sitemap-generators-usage/</guid>
      <description>&lt;p&gt;&lt;strong&gt;sitemap-generators&lt;/strong&gt;是一款Sitemap生成工具，使用它可以生成符合sitemap.org规范的Sitemap文件，以便于提交给各个网站工具平台。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://code.google.com/archive/p/sitemap-generators/&#34;&gt;项目地址&lt;/a&gt;  &amp;amp;&amp;amp;  &lt;a href=&#34;https://code.google.com/archive/p/sitemap-generators/downloads&#34;&gt;下载地址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载&lt;strong&gt;sitemap_gen_1.5.tar.gz&lt;/strong&gt;解压，得到以下内容：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;root@bwgzl:~/sitemap_gen# ls -lh
total 140K
-r--r-----  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;   &lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt; Jun &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2005&lt;/span&gt; AUTHORS
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt; 2.6K Jul &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; ChangeLog
-r--r-----  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt; 1.8K Jun &lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2005&lt;/span&gt; COPYING
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt; 6.4K Jul &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; example_config.xml
-rw-r-----  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt; 1.6K Jun &lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; example_urllist.txt
drwxr-xr-x &lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt; root root 4.0K Aug  &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; 14:25 getos.org
-rw-r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;244&lt;/span&gt; Jul &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; PKG-INFO
-r--r--r--  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt; 1.1K Jun &lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; README
-r-xr-xr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;301&lt;/span&gt; Jul &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; setup.py
-rwxr-xr-x  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;502&lt;/span&gt;  66K Jul &lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;2007&lt;/span&gt; sitemap_gen.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;将默认的&lt;strong&gt;example_config.xml&lt;/strong&gt;拷贝为&lt;strong&gt;ac.xml&lt;/strong&gt;，参考以下修改：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;site&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;base_url=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://getos.org/&amp;#34;&lt;/span&gt;
  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/**&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;以下为sitemap.xml文件存放目录**/&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;store_into=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/root/sitemap_gen/sitemap.xml&amp;#34;&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;verbose=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;
  &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;lt;urllist&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;path=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;urllist.txt&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;encoding=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;action=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;drop&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;type=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;wildcard&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*~&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;filter&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;action=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;drop&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;type=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;regexp&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;pattern=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/\.[^/]*&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;/site&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;接下来，使用&lt;code&gt;wget&lt;/code&gt;来遍历网站所有URL，将结果保存为&lt;strong&gt;urlinfolist.txt&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;wget -mk --spider -r  http://getos.org/ -o urlinfolist.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;-r: 递归遍历目录&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;处理wget到的&lt;strong&gt;urlinfolist.txt&lt;/strong&gt;文件，删除不需要的内容。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;cat urlinfolist.txt | tr &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\012&amp;#39;&lt;/span&gt; | grep &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^http&amp;#34;&lt;/span&gt; | egrep -vi &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[?]|[.]jpg&lt;/span&gt;$&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; | sort -u &amp;gt; urllist.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;最后使用如下命令来生成&lt;strong&gt;sitemap.xml&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;python sitemap_gen.py --config&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ac.xml 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;按照配置文件所示，在&lt;strong&gt;sitemap.xml&lt;/strong&gt;文件保存在_/root/sitemap_gen/_目录下。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>