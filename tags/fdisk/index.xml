<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>fdisk on UNIXETC</title>
    <link>https://unixetc.com/tags/fdisk/</link>
    <description>UNIXETC (fdisk)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 19 Mar 2015 12:31:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/fdisk/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>fdisk分区实例</title>
      <link>https://unixetc.com/post/examples-of-fdisk-partition/</link>
      <pubDate>Thu, 19 Mar 2015 12:31:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/examples-of-fdisk-partition/</guid>
      <description>&lt;h3 id=&#34;查看磁盘分区详情&#34;&gt;查看磁盘分区详情&lt;/h3&gt;
&lt;p&gt;直接使用fdisk -l 或者使用fdisk /dev/sda，再使用p命令来查看&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2        61870078    62912511      521217    5  Extended
/dev/sda5        61870080    62912511      521216   82  Linux swap / Solaris
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;fdisk命令&#34;&gt;fdisk命令&lt;/h3&gt;
&lt;p&gt;fdisk有以下命令可用，其中常用的已简单说明&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): m
Command action
   a   toggle a bootable flag   //切换可引导标记
   b   edit bsd disklabel
   c   toggle the dos compatibility flag
   d   delete a partition   //删除分区
   l   list known partition types   //查看所有分区类型
   m   print this menu   //返回此菜单
   n   add a new partition   //新建分区
   o   create a new empty DOS partition table
   p   print the partition table   //查看当前分区表
   q   quit without saving changes   //取消更改并退出
   s   create a new empty Sun disklabel
   t   change a partition&#39;s system id   //修改分区系统id
   u   change display/entry units
   v   verify the partition table   //验证分区表
   w   write table to disk and exit   //保存更改并退出
   x   extra functionality (experts only)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;操作范例&#34;&gt; 操作范例&lt;/h3&gt;
&lt;p&gt;1,删除分区&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): p   //显示分区表

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2        61870078    62912511      521217    5  Extended
/dev/sda5        61870080    62912511      521216   82  Linux swap / Solaris

Command (m for help): d   //删除分区
Partition number (1-5): 5   //分区号
Command (m for help): d 
Partition number (1-5): 2

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux

Command (m for help):
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;2,新建分区&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): n   //新建分区
Partition type:  //分区类型
   p   primary (1 primary, 0 extended, 3 free)  //主分区
   e   extended   //扩展分区
Select (default p):  //默认主分区
Using default response p
Partition number (1-4, default 2):  //分区号，默认升序分配
Using default value 2
First sector (61868032-62914559, default 61868032):   //首sector，默认接着上一分区
Using default value 61868032
Last sector, +sectors or +size{K,M,G} (61868032-62914559, default 62914559): +300M  //容量大小，可用单位K,M,G
Command (m for help): n
Partition type:
   p   primary (2 primary, 0 extended, 2 free)
   e   extended
Select (default p):
Using default response p
Partition number (1-4, default 3):
Using default value 3
First sector (62482432-62914559, default 62482432):
Using default value 62482432
Last sector, +sectors or +size{K,M,G} (62482432-62914559, default 62914559): //默认使用全部剩余容量
Using default value 62914559

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2        61868032    62482431      307200   83  Linux
/dev/sda3        62482432    62914559      216064   83  Linux

Command (m for help):
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;3,切换可引导标记&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): a  //切换可引导标记
Partition number (1-4): 2   //分区号

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2   *    61868032    62482431      307200   83  Linux   //已增加可引导标记
/dev/sda3        62482432    62914559      216064   83  Linux

Command (m for help): a
Partition number (1-4): 2

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2        61868032    62482431      307200   83  Linux   //取消可引导标记
/dev/sda3        62482432    62914559      216064   83  Linux

Command (m for help):
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;4,更改分区类型&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): l   //查看所有分区类型

 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris
 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-
 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-
 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
 4  FAT16 &amp;lt;32M      40  Venix 80286     85  Linux extended  c7  Syrinx
 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data
 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .
 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility
 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt
 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access
 a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O
 b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor
 c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs
 e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT
 f  W95 Ext&#39;d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/
10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b
11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor
12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor
14  Hidden FAT16 &amp;lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary
16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep
1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT
1e  Hidden W95 FAT1 80  Old Minix

Command (m for help): t  //更改分区类型
Partition number (1-4): 2  //分区号
Hex code (type L to list codes): 82 //82号:交换分区
Changed system type of partition 2 to 82 (Linux swap / Solaris)

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32212254720 bytes
255 heads, 63 sectors/track, 3916 cylinders, total 62914560 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000657c3

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    61868031    30932992   83  Linux
/dev/sda2        61868032    62482431      307200   82  Linux swap / Solaris   //已更改为交换分区
/dev/sda3        62482432    62914559      216064   83  Linux

Command (m for help):&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>树莓派挂载U盘</title>
      <link>https://unixetc.com/post/raspberry-pi-mount-udisk-as-the-storage-partition/</link>
      <pubDate>Thu, 11 Dec 2014 21:21:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/raspberry-pi-mount-udisk-as-the-storage-partition/</guid>
      <description>&lt;p&gt;树莓派用的是8g的TF卡，想作为小型NAS有点小，存不了多少东西，于是将一个闲置的32G U盘挂载上，当作存储分区&lt;/p&gt;
&lt;p&gt;以下为操作过程：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;查看磁盘信息&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pi@raspberrypi ~ $ sudo fdisk -l

Disk /dev/mmcblk0: 7990 MB, 7990149120 bytes
4 heads, 16 sectors/track, 243840 cylinders, total 15605760 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000981cb

        Device Boot      Start         End      Blocks   Id  System
/dev/mmcblk0p1            8192      122879       57344    c  W95 FAT32 (LBA)
/dev/mmcblk0p2          122880    15605759     7741440   83  Linux

Disk /dev/sda: 32.2 GB, 32229031936 bytes
255 heads, 63 sectors/track, 3918 cylinders, total 62947328 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x15a8a090

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048    62947327    31472640    f  W95 Ext&#39;d (LBA)
/dev/sda5            4096    62947327    31471616    7  HPFS/NTFS/exFAT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这里看到，&lt;strong&gt;/dev/sda&lt;/strong&gt;为32G的磁盘，分区格式为NTFS，现在就是要将改磁盘挂载为linux分区。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;编辑分区&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pi@raspberrypi ~ $ sudo fdisk /dev/sda

Command (m for help): p   //查看分区信息

Disk /dev/sda: 32.2 GB, 32229031936 bytes
255 heads, 63 sectors/track, 3918 cylinders, total 62947328 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x15a8a090

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048    62947327    31472640    f  W95 Ext&#39;d (LBA)
/dev/sda5            4096    62947327    31471616    7  HPFS/NTFS/exFAT

Command (m for help): d //删除分区
Partition number (1-5): 5

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32229031936 bytes
255 heads, 63 sectors/track, 3918 cylinders, total 62947328 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x15a8a090

   Device Boot      Start         End      Blocks   Id  System

Command (m for help): m //查看命令
Command action
   a   toggle a bootable flag
   b   edit bsd disklabel
   c   toggle the dos compatibility flag
   d   delete a partition
   l   list known partition types
   m   print this menu
   n   add a new partition
   o   create a new empty DOS partition table
   p   print the partition table
   q   quit without saving changes
   s   create a new empty Sun disklabel
   t   change a partition&#39;s system id
   u   change display/entry units
   v   verify the partition table
   w   write table to disk and exit
   x   extra functionality (experts only)

Command (m for help): n  //新建分区
Partition type:
   p   primary (0 primary, 0 extended, 4 free)
   e   extended
Select (default p):
Using default response p
Partition number (1-4, default 1):
Using default value 1
First sector (2048-62947327, default 2048):
Using default value 2048
Last sector, +sectors or +size{K,M,G} (2048-62947327, default 62947327):
Using default value 62947327

Command (m for help): p

Disk /dev/sda: 32.2 GB, 32229031936 bytes
255 heads, 63 sectors/track, 3918 cylinders, total 62947328 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x15a8a090

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1            2048    62947327    31472640   83  Linux

Command (m for help): w
The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以上完成后就会新建**/dev/sda1**分区&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;格式化分区&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pi@raspberrypi ~ $ sudo mkfs.ext3 /dev/sda1
mke2fs 1.42.5 (29-Jul-2012)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
1970416 inodes, 7868160 blocks
393408 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
241 block groups
32768 blocks per group, 32768 fragments per group
8176 inodes per group
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
        4096000

Allocating group tables: done
Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;挂载U盘&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pi@raspberrypi ~ $ mkdir ussd
pi@raspberrypi ~ $ sudo mount /dev/sda1 ./ussd/
pi@raspberrypi ~ $ df -hal
Filesystem      Size  Used Avail Use% Mounted on
rootfs          7.3G  3.0G  3.9G  44% /
/dev/root       7.3G  3.0G  3.9G  44% /
devtmpfs        211M     0  211M   0% /dev
tmpfs            44M  220K   44M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
proc               0     0     0    - /proc
sysfs              0     0     0    - /sys
tmpfs            88M     0   88M   0% /run/shm
devpts             0     0     0    - /dev/pts
/dev/mmcblk0p1   56M   19M   38M  34% /boot
/dev/sda1        30G   45M   28G   1% /home/pi/ussd
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;开机自动挂载U盘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;编辑**/etc/fstab**&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pi@raspberrypi ~ $ cat /etc/fstab
proc            /proc           proc    defaults          0       0
/dev/mmcblk0p1  /boot           vfat    defaults          0       2
/dev/mmcblk0p2  /               ext4    defaults,noatime  0       1
/dev/sda1       /home/pi/ussd   ext3    defaults          0       0
# a swapfile is not a swap partition, so no using swapon|off from here on, use  dphys-swapfile     swap[on|off]  for that&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>fstab自动挂载分区</title>
      <link>https://unixetc.com/post/fstab-automatically-mount-partitions/</link>
      <pubDate>Sun, 08 Sep 2013 19:18:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/fstab-automatically-mount-partitions/</guid>
      <description>&lt;p&gt;使用&lt;code&gt;fdisk -l&lt;/code&gt;查看分区信息&lt;/p&gt;
&lt;p&gt;以下为需要自动挂载的分区:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;分区       |      格式
------------------------------
/dev/sd1   |    NTFS
/dev/sd5   |    NTFS
/dev/sd6   |    NTFS
/dev/sd7   |    NTFS
/dev/sd8   |    NTFS
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;新建挂载目录&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#mkdir /media/{a,b,c,d,e}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑fstab文件&lt;code&gt;vi /etc/fstab&lt;/code&gt;写入以下内容&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/dev/sda1 /media/a ntfs-3g defaults,iocharset=gb2312 0 0
/dev/sda5 /media/b ntfs-3g defaults,iocharset=gb2312 0 0
/dev/sda6 /media/c ntfs-3g defaults,iocharset=gb2312 0 0
/dev/sda7 /media/d ntfs-3g defaults,iocharset=gb2312 0 0
/dev/sda8 /media/e ntfs-3g defaults,iocharset=gb2312 0 0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;说明:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;/dev/sdax      表示分区&lt;/li&gt;
&lt;li&gt;/mnt/xxx       表示挂载点&lt;/li&gt;
&lt;li&gt;vat/ntfs-3g    表示分区格式&lt;/li&gt;
&lt;li&gt;iocharset=xxx  设置字符集,为了支持windows中文目录，应设为&lt;strong&gt;gb2312&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>