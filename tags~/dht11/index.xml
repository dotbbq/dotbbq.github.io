<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>dht11 on UNIXETC</title>
    <link>https://unixetc.com/tags/dht11/</link>
    <description>UNIXETC (dht11)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Thu, 30 Jul 2015 12:59:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/dht11/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>将树莓派数据上传至乐为物联</title>
      <link>https://unixetc.com/post/sumbit-raspberry-pi-data-to-lewei50/</link>
      <pubDate>Thu, 30 Jul 2015 12:59:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/sumbit-raspberry-pi-data-to-lewei50/</guid>
      <description>&lt;p&gt;进入&lt;a href=&#34;http://www.lewei50.com/&#34;&gt;http://www.lewei50.com/&lt;/a&gt;注册登录&lt;/p&gt;
&lt;h3 id=&#34;添加设备add-device&#34;&gt;添加设备(Add Device)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;我的物联&lt;/strong&gt; -&amp;gt; &lt;strong&gt;我的设备&lt;/strong&gt;，添加新设备，类型选择&lt;strong&gt;其他&lt;/strong&gt;，不使用模板。&lt;/p&gt;
&lt;p&gt;请自定义设备&lt;strong&gt;标识&lt;/strong&gt;，后面要用到。&lt;/p&gt;
&lt;h4 id=&#34;添加传感器&#34;&gt;添加传感器&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;我的物联&lt;/strong&gt; -&amp;gt; &lt;strong&gt;感器与控制器&lt;/strong&gt;，新建传感器。&lt;/p&gt;
&lt;p&gt;其中&lt;strong&gt;标识&lt;/strong&gt;为提交数据依据，建议英文。&lt;/p&gt;
&lt;h3 id=&#34;向乐为物联提交数据&#34;&gt;向乐为物联提交数据&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;lewei.sh&lt;/code&gt;代码如下 &lt;a href=&#34;http://cdn.lyq.wiki/res/lewei.sh&#34;&gt;http://cdn.lyq.wiki/res/lewei.sh&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/bash
LURL=http://www.lewei50.com/api/V1/Gateway/UpdateSensors/01
KEY=&amp;quot;2fasdfsdfsdf9ffadsf62dfbfsdfa1&amp;quot;
sys_load=`cat /proc/loadavg | awk &#39;{print $2}&#39;`
st=`/usr/bin/sen_t`
sh=`/usr/bin/sen_h`

for i in 1 2 3 4 5; do
        sys_temp=`cat /sys/class/thermal/thermal_zone0/temp | awk &#39;{print $1/1000}&#39;`
        if [[ &amp;quot;${sys_temp}&amp;quot; =~ ^- ]]
        then
                sys_temp=&#39;0.0&#39;
        else
                echo ${sys_temp}
                break
        fi
done

echo &amp;quot;Printf Values&amp;quot;
echo &amp;quot;sys_temp:&amp;quot;${sys_temp}
echo &amp;quot;sys_load:&amp;quot;${sys_load}
echo &amp;quot;sensor_t:&amp;quot;${st}
echo &amp;quot;sensor_h:&amp;quot;${sh}
echo &amp;quot;Done!&amp;quot;

echo &amp;quot;Sumbit Data to Lewei&amp;quot;

curl --request POST ${LURL} --header &amp;quot;userkey:${KEY}&amp;quot; --data &amp;quot;[{&#39;Name&#39;:&#39;load&#39;,&#39;Value&#39;:&#39;${sys_load}&#39;},{&#39;Name&#39;:&#39;temp&#39;,&#39;Value&#39;:&#39;${sys_temp}&#39;},{&#39;Name&#39;:&#39;sd&#39;,&#39;Value&#39;:&#39;${sh}&#39;},{&#39;Name&#39;:&#39;wd&#39;,&#39;Value&#39;:&#39;${st}&#39;}]&amp;quot; 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中&lt;strong&gt;LURL&lt;/strong&gt;后面的&lt;strong&gt;01&lt;/strong&gt;为设备标识,&lt;strong&gt;KEY&lt;/strong&gt;为用户&lt;strong&gt;Userkey&lt;/strong&gt;,JSON数据中的&lt;strong&gt;Name&lt;/strong&gt;对应相应的&lt;strong&gt;传感器标识&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;其中**/usr/bin/**下的**st,sh**为通过DHT11采集温度与湿度程序，参考&lt;a href=&#34;https://unixetc.com/post/Raspberry-Pi-by-DHT11-collecting-temperature-and-humidity/&#34;&gt;树莓派通过DHT11采集温度与湿度&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;接下来添加cronta任务，每隔1分钟运行一次该脚本&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# m h  dom mon dow   command
*/1 * * * * /home/pi/lewei.sh&amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后可以通过&lt;a href=&#34;http://www.lewei50.com/u/g/12290&#34;&gt;http://www.lewei50.com/u/g/12290&lt;/a&gt;来查看具体的数据以及图表&lt;/p&gt;
&lt;p&gt;监控页面&lt;a href=&#34;http://raspi.in&#34;&gt;http://raspi.in&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.lewei50.com/dev/content/api?sk=70&#34;&gt;http://www.lewei50.com/dev/content/api?sk=70&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.dqy.me/2013/use-cosm.html&#34;&gt;http://www.dqy.me/2013/use-cosm.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://personal.xively.com/dev/tutorials/pi/&#34;&gt;https://personal.xively.com/dev/tutorials/pi/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>树莓派连接DHT11采集温度与湿度</title>
      <link>https://unixetc.com/post/raspberry-pi-by-dht11-collecting-temperature-and-humidity/</link>
      <pubDate>Sun, 21 Jun 2015 16:21:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/raspberry-pi-by-dht11-collecting-temperature-and-humidity/</guid>
      <description>&lt;h3 id=&#34;dht11介绍&#34;&gt;DHT11介绍&lt;/h3&gt;
&lt;p&gt;DHT11是一款有已校准数字信号输出的温湿度传感器。 精度湿度+-5%RH， 温度+-2℃，量程湿度20-90%RH， 温度0~50℃。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHT11针脚说明&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/dht11.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VCC	供电 3－5.5VDC&lt;/li&gt;
&lt;li&gt;DATA	串行数据，单总线&lt;/li&gt;
&lt;li&gt;N/A	空脚，请悬空&lt;/li&gt;
&lt;li&gt;GND	接地，电源负极&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;硬件连接&#34;&gt;硬件连接&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;树莓派GPIO针脚说明&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://cdn.lyq.wiki/imgs/Pi-GPIO-header-26-sm.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHT11与树莓派链接&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;VCC连接+3V3
DATA连接GPIO4
GND链接GND&lt;/p&gt;
&lt;h3 id=&#34;软件部分&#34;&gt;软件部分&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;安装wiringPi&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo apt-get install git-core
git clone git://git.drogon.net/wiringPi
cd wiringPi
./build
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;如果由于网络原因无法&lt;code&gt;git clone&lt;/code&gt;成功，可以从此下载wiringPi &lt;a href=&#34;http://cdn.lyq.wiki/res/wiringPi_v2.3.1.zip&#34;&gt;http://cdn.lyq.wiki/res/wiringPi_v2.3.1.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;验证是否安装成功&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gpio -v
gpio readall
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;下载编译C语言程序代码&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://cdn.lyq.wiki/res/sensor.c
gcc -o sensor sensor.c -lwiringPi
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;运行程序&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo ./sensor
24,39
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;输出结果，第一个为湿度，第二个为温度&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>