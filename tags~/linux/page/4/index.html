<!DOCTYPE html>


<html lang="zh-cn" data-theme="">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Linux - UNIXETC</title>
<meta name="description" content="A Personal Site">

<link rel="alternate" type="application/rss+xml" href="https://unixetc.com/tags/linux/index.xml" title="UNIXETC" />
<link rel="icon" type="image/x-icon" href="https://unixetc.com/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://unixetc.com/favicon.png">

<link rel="stylesheet" href="https://unixetc.com/css/light.css?rnd=1596103043" />
<style>

    [data-theme="dark"] {   
        --font-color: #eee;
--bg-color: #212121;

--link-color:#599ada;
--link-state-color:#ff5858;
--link-state-border-color: rgba(238, 54, 54, 0.5);

--thead-bg-color: #343a40;
--table-border-color: lightgrey;

--pre-color: #333;
--pre-bg-color: #f1f1f1;

--bq-color: #ccc;
--hr-color: #333;

--pagination-bg-color: #373737;
--pagination-link-color: #b6b6b6;

--post-info-color: grey;

--switcher-color: #333;
--switcher-bg-color: #fff;

    }

</style>

<link rel="stylesheet" href="https://unixetc.com/css/style.css?rnd=1596103043" />





<meta property="og:title" content="Linux" />
<meta property="og:description" content="A Personal Site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://unixetc.com/tags/linux/" />
<meta property="og:updated_time" content="2020-07-30T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux"/>
<meta name="twitter:description" content="A Personal Site"/>








    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header class="common-header"> 
            
                <h1 class="site-title">
    <a href="/">UNIXETC</a>
</h1>
<nav>
    
    
    <a class="" href="https://unixetc.com/tags/" title="">Tags</a>
    
    <a class="" href="https://unixetc.com/readme/" title="ReadMe">Readme</a>
    
</nav>

            
        </header>
        <main id="main" tabindex="-1"> 
            
    <h1>Tag: Linux</h1>
    <div class="post-info">
        <a href="https://unixetc.com/tags">To all tags</a>
    </div>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/find-the-vps-traffic-consumption-culprit/">查出VPS流量消耗元凶</a></h1>
    </header>

    <div class="content post-summary">
        上月不知什么原因VPS流量提前消耗完了，然后通知这月10号重新reset，于是只能临时开了一个月的locvps进行过渡。好不容易熬到昨儿，reset后赶紧把数据和站点又搬回来。 今儿偶尔登录vps，突然发现流量消耗咋一直很高，两天不到就消耗了170G，额滴神呐!查看详细使用统计，发现从昨儿reset以来，OUT bps一直维持在19M左右，瞬间脑袋瓜嗡嗡的！
于是赶紧动手找找，看看消耗流量的元凶到底是谁？
首先，安装iftop来检查网络使用情况。官网在这里http://www.ex-parrot.com/~pdw/iftop/，CentOS安装方法如下：
yum install -y flex byacc libpcap ncurses ncurses-devel libpcap-devel #安装需求软件 wget http://www.ex-parrot.com/~pdw/iftop/download/iftop-0.17.tar.gz tar zxf iftop-0.17.tar.gz cd iftop-0.17 ./configure make &amp;&amp; make install  安装完成后，可以通过iftop来运行，建议加上-P参数，显示使用端口信息，如下：
主界面中左侧为本地端，右侧为远端，中间的&lt;=和=&gt;表示流量方向。 下面的TX：发送流量/RX：接收流量/TOTAL：总流量/Cumm：运行iftop到目前时间的总流量/peak：流量峰值/rates：分别表示过去 2s 10s 40s 的平均流量
从上图来看，本地IP一直在向一个140.249.34.53发送数据，从peak统计来看，速率在22.3Mb左右，和网站统计相符。 知道端口后，可以通过 netstat -ntlup|grep 端口号来查看具体进程，没有的话可以通过yum install net-tools来安装。
我试着查了下这个IP，发现是山东青岛的，再通过IP反查域名，真想才出来了，原来是百度云的相关IP。这才想起来，我安装了BaiduPCS-Go百度网盘客户端，用来对vps数据进行备份，原来搞鬼的是这个东西。找到元凶就好办了，首先把这个IP给禁了iptables -A INPUT -p tcp -s 140.249.34.53 -j DROP 禁完后，实时流量一下子就降了下来，如下所示：
而后将BaiduPCS-Go删除，以绝后患！
    </div>

    
    


<div class="post-info">
    
        <div class="post-date">2019-04-11</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/centos">#CentOS</a></li>
                    
                        <li><a href="https://unixetc.com/tags/iftop">#iftop</a></li>
                    
                        <li><a href="https://unixetc.com/tags/libpcap">#libpcap</a></li>
                    
                        <li><a href="https://unixetc.com/tags/ncurses">#ncurses</a></li>
                    
                        <li><a href="https://unixetc.com/tags/netstat">#netstat</a></li>
                    
                        <li><a href="https://unixetc.com/tags/iptables">#iptables</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/grub-boot-iso-image-file/">GRUB引导ISO镜像</a></h1>
    </header>

    <div class="content post-summary">
        家里电脑安装了双系统(Xubuntu+Windows7)，平时一直不关机，开着TeamViewer便于在办公室远程操作。
这次不知怎么回事儿，远程掉了，回家一看Windows意外关机，再开机直接蓝屏。
由于为了省资源，关闭了系统保护，没法进行还原，多次试着拯救都没能解决，无限蓝屏……
手头刚好没有WinPE的U盘，没法ghost恢复或重装Windows，只有xubuntu可用，一筹莫展。
突然想到grub是否可以引导iso？ 网上找了下，还真可以，于是下载了个WinPE镜像文件，打算通过grub来引导以修复Windows。
具体操作如下：
安装grub-imageboot
alair@e6440:~$ apt search memdisk 正在排序... 完成 全文搜索... 完成 grub-imageboot/bionic,bionic 0.6 all boot iso, harddisk and floppy images with grub2 and syslinux memdisk alair@e6440:~$ sudo apt install grub-imageboot [sudo] alair 的密码： 正在读取软件包列表... 完成 正在分析软件包的依赖关系树 正在读取状态信息... 完成 将会同时安装下列软件： syslinux-common 下列【新】软件包将被安装： grub-imageboot syslinux-common 升级了 0 个软件包，新安装了 2 个软件包，要卸载 0 个软件包，有 4 个软件包未被升级。 需要下载 1,176 kB 的归档。 解压缩后会消耗 3,684 kB 的额外空间。 您希望继续执行吗？ [Y/n] y 获取:1 http://mirrors.cqu.edu.cn/ubuntu bionic/main amd64 syslinux-common all 3:6.
    </div>

    
    


<div class="post-info">
    
        <div class="post-date">2018-07-08</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/windows">#Windows</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub">#GRUB</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub-imageboot">#grub-imageboot</a></li>
                    
                        <li><a href="https://unixetc.com/tags/grub2">#grub2</a></li>
                    
                        <li><a href="https://unixetc.com/tags/memdisk">#memdisk</a></li>
                    
                        <li><a href="https://unixetc.com/tags/iso">#ISO</a></li>
                    
                        <li><a href="https://unixetc.com/tags/winpe">#WinPE</a></li>
                    
                        <li><a href="https://unixetc.com/tags/update-grub">#update-grub</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/canonical-livepatch-service/">Ubuntu配置Livepatch服务</a></h1>
    </header>

    <div class="content post-summary">
        CLS(Canonical Livepatch Service)是Ubuntu母公司Canonical提供的一项服务，该服务可以为处于LTS的Ubuntu版本提供内核关键补丁修复，而不需要重新启动系统，特别适用于用作Server的系统。
使用CLS的前提是必须注册一个Ubuntu帐号，地址为https://login.ubuntu.com/+login
注册完成后，即可访问CLS主页https://www.ubuntu.com/server/livepatch进行登录配置。
登陆后选择用户类型，一般个人用户选择Ubuntu User，然后点击Get your Livepatch token获取密匙
按照下一步提示进行操作，启用CLS服务。
运行完成后即成功启用CLS服务。
检查CLS服务配置状态可以使用以下命令:
alair@e6440:~$ sudo canonical-livepatch status --verbose client-version: 8.0.2 machine-id: 08e0*****************750db machine-token: 4753a054c*****************a2eb84c7 architecture: x86_64 cpu-model: Intel(R) Core(TM) i5-4310M CPU @ 2.70GHz last-check: 2018-05-25T19:55:15.537634075+08:00 boot-time: 2018-05-25T19:47:51+08:00 uptime: 14m43s status: - kernel: 4.15.0-22.24-generic running: true livepatch: checkState: checked patchState: nothing-to-apply version: &quot;&quot; fixes: &quot;&quot; 
    </div>

    
    


<div class="post-info">
    
        <div class="post-date">2018-05-25</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/ubuntu">#Ubuntu</a></li>
                    
                        <li><a href="https://unixetc.com/tags/kernel">#Kernel</a></li>
                    
                        <li><a href="https://unixetc.com/tags/canonical">#Canonical</a></li>
                    
                        <li><a href="https://unixetc.com/tags/livepatch">#Livepatch</a></li>
                    
                        <li><a href="https://unixetc.com/tags/cls">#CLS</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/linux-fix-resolution-display-exception/">Linux下修复分辨率显示异常</a></h1>
    </header>

    <div class="content post-summary">
        家里放了台老旧的台式机，显卡是GTX 660Ti，windows下必须安装特定的驱动版本才能显示最佳分辨率(1680x1050)，如果更新到最新的Nvidia驱动，反而显示器无法正常显示(1024x768)。
没想到，这种情况在Linux下依然存在，不论是安装Debian还是Linux Mint或者Ubuntu，默认都是1024x768。
网上找到了修复分辨率异常的方法，整理如下。
检查当前显卡硬件情况 $ lspci |grep VGA 01:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 660 Ti] (rev a2)  可以看到，显卡硬件识别正常。
检查显卡分辨率情况 $ xrandr Screen 0: minimum 320 x 200, current 1024 x 768, maximum 8192 x 8192 VGA-1 disconnected (normal left inverted right x axis y axis) DVI-I-1 connected primary 1024x768+0+0 (normal left inverted right x axis y axis) 0mm x 0mm 1024x768 60.00* 800x600 60.
    </div>

    
    


<div class="post-info">
    
        <div class="post-date">2017-08-26</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/%E5%88%86%E8%BE%A8%E7%8E%87">#分辨率</a></li>
                    
                        <li><a href="https://unixetc.com/tags/nvidia">#nvidia</a></li>
                    
                        <li><a href="https://unixetc.com/tags/xrandr">#xrandr</a></li>
                    
                        <li><a href="https://unixetc.com/tags/lspci">#lspci</a></li>
                    
                        <li><a href="https://unixetc.com/tags/cvt">#cvt</a></li>
                    
                        <li><a href="https://unixetc.com/tags/660ti">#660ti</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
        <article class="post-list">
    <header class="post-header">
        <h1 class="post-title"><a href="/post/sitemap-generators-usage/">sitemap-generators使用实例</a></h1>
    </header>

    <div class="content post-summary">
        sitemap-generators是一款Sitemap生成工具，使用它可以生成符合sitemap.org规范的Sitemap文件，以便于提交给各个网站工具平台。
项目地址 &amp;&amp; 下载地址
下载sitemap_gen_1.5.tar.gz解压，得到以下内容：
root@bwgzl:~/sitemap_gen# ls -lh total 140K -r--r----- 1 502 502 22 Jun 17 2005 AUTHORS -r--r--r-- 1 502 502 2.6K Jul 19 2007 ChangeLog -r--r----- 1 502 502 1.8K Jun 17 2005 COPYING -rw-r--r-- 1 502 502 6.4K Jul 19 2007 example_config.xml -rw-r----- 1 502 502 1.6K Jun 26 2007 example_urllist.txt drwxr-xr-x 23 root root 4.0K Aug 3 14:25 getos.org -rw-r--r-- 1 502 502 244 Jul 19 2007 PKG-INFO -r--r--r-- 1 502 502 1.
    </div>

    
    


<div class="post-info">
    
        <div class="post-date">2017-08-13</div>
    
    <div class="post-taxonomies">
        
            <ul class="post-categories">
                
                    <li><a href="https://unixetc.com/categories/STUFF">STUFF</a></li>
                
            </ul>
            
            
                <ul class="post-tags">
                    
                        <li><a href="https://unixetc.com/tags/linux">#Linux</a></li>
                    
                        <li><a href="https://unixetc.com/tags/wget">#wget</a></li>
                    
                        <li><a href="https://unixetc.com/tags/google">#Google</a></li>
                    
                        <li><a href="https://unixetc.com/tags/sitemap">#sitemap</a></li>
                    
                        <li><a href="https://unixetc.com/tags/seo">#seo</a></li>
                    
                        <li><a href="https://unixetc.com/tags/url">#url</a></li>
                    
                </ul>
        
    </div>
</div>

</article>
    
    
    
        
    <div class="pagination">
        <div class="left pagination-item ">
            
                <a href="/tags/linux/page/3/">To new posts</a>
            
        </div>
        <div class="right pagination-item ">
            
                <a href="/tags/linux/page/5/">To old posts</a>
            
        </div>
    </div>



        </main>
        
            <footer class="common-footer">
    
    

    <div class="copyright">
        <p>© Alair, 2020<br>
        Powered by <a target="_blank" rel="noopener noreferrer" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" rel="noopener noreferrer" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.CDN by <a href="https://dwz.cn/juw2S2At" target="_blank">Qiniu</a>,Host by <a href="https://dwz.cn/CdAD0bNi" target="_blank">BWG</a>.<script type="text/javascript" src="//js.users.51.la/20892031.js"></script>
        </p>  
    </div> 

    


    
</footer>

        
    </div>
</body>
</html>
