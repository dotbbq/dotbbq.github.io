<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>H2O on UNIXETC</title>
    <link>https://unixetc.com/tags/h2o/</link>
    <description>UNIXETC (H2O)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 26 Mar 2016 13:26:00 +0000</lastBuildDate>
    
    <atom:link href="https://unixetc.com/tags/h2o/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Ubunt下安装H2O</title>
      <link>https://unixetc.com/post/install-h2o-on-ubuntu/</link>
      <pubDate>Sat, 26 Mar 2016 13:26:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/install-h2o-on-ubuntu/</guid>
      <description>&lt;h3 id=&#34;更新系统&#34;&gt;更新系统&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;apt-get update &amp;amp;&amp;amp; apt-get upgrade -y &amp;amp;&amp;amp; apt-get dist-upgrade -y &amp;amp;&amp;amp; apt-get autoremove --purge -y &amp;amp;&amp;amp; apt-get autoclean -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;安装必备软件&#34;&gt;安装必备软件&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;apt-get install locate git cmake build-essential checkinstall autoconf pkg-config libtool python-sphinx wget libcunit1-dev nettle-dev libyaml-dev libuv-dev -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;安装wslay&#34;&gt;安装wslay&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/tatsuhiro-t/wslay.git
cd wslay/
autoreconf -i
automake
autoconf
./configure
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;安装完成后检查lib文件，如下所示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls /usr/local/lib/
libuv.a   libuv.so.1      libwslay.la    libwslay.so.0.0.1  python3.4
libuv.la  libuv.so.1.0.0  libwslay.so    pkgconfig
libuv.so  libwslay.a      libwslay.so.0  python2.7
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;安装最新版openssl&#34;&gt;安装最新版OpenSSL&lt;/h3&gt;
&lt;p&gt;删除旧版OpenSSL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apt-get remove --purge openssl libssl-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;下载新版OpenSSL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://www.openssl.org/source/openssl-1.0.2.tar.gz --no-check-certificate
tar -xvzf openssl-1.0.2.tar.gz
mv openssl-1.0.2 openssl
cd openssl/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;建立&lt;code&gt;openssl.ld&lt;/code&gt;文件，内容如下:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vi openssl.ld

OPENSSL_1.0.0 {
    global:
        *;

    local:
        *;
};

OPENSSL_1.0.1 {
} OPENSSL_1.0.0;

OPENSSL_1.0.1d {
} OPENSSL_1.0.1;

OPENSSL_1.0.2 {
} OPENSSL_1.0.1d;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;接下开始安装OpenSSL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./config -fPIC shared -Wl,--version-script=/root/openssl/openssl.ld -Wl,-Bsymbolic-functions
make
make test
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;检查安装结果&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/ssl/bin/openssl version
OpenSSL 1.0.2 22 Jan 2015
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;设置环境变量&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;export OPENSSL_INCLUDE_DIR=/usr/local/ssl/include/
export OPENSSL_LIBRARIES=&#39;/usr/local/ssl/lib/libssl.so;/usr/local/ssl/lib/libcrypto.so&#39;
export LD_LIBRARY_PATH=/usr/local/ssl/lib/
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;安装h2o&#34;&gt;安装H2O&lt;/h3&gt;
&lt;p&gt;新建&lt;code&gt;FindOpenSSL.cmake&lt;/code&gt;文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd h2o/
vi cmake/FindOpenSSL.cmake
FIND_PATH(OPENSSL_INCLUDE_DIR NAMES openssl/ssl.h)

INCLUDE(FindPackageHandleStandardArgs)
FIND_PACKAGE_HANDLE_STANDARD_ARGS(OPENSSL DEFAULT_MSG OPENSSL_LIBRARIES
OPENSSL_INCLUDE_DIR)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编译安装H2O&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cmake -DCMAKE_INSTALL_PREFIX=/usr/local/h2o -DOPENSSL_LIBRARIES=&#39;/usr/local/ssl/lib/libssl.so;/usr/local/ssl/lib/libcrypto.so&#39; -DOPENSSL_INCLUDE_DIR=/usr/local/ssl/include/
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;运行h2o&#34;&gt;运行H2O&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/h2o/bin/h2o -c examples/h2o/h2o.conf&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>将Nginx更换为H2O</title>
      <link>https://unixetc.com/post/install-h2o-on-bandwagon-vps/</link>
      <pubDate>Tue, 21 Jul 2015 17:31:00 +0000</pubDate>
      
      <guid>https://unixetc.com/post/install-h2o-on-bandwagon-vps/</guid>
      <description>&lt;h3 id=&#34;安装必须的软件&#34;&gt;安装必须的软件&lt;/h3&gt;
&lt;p&gt;预备工具软件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#apt-get install autoconf automake m4 build-essential
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;libssl-dev &lt;strong&gt;必选&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#apt-get install openssl libssl-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以下为可选包，可自行搜索安装&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;libuv&lt;/li&gt;
&lt;li&gt;libyaml&lt;/li&gt;
&lt;li&gt;wslay&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;安装h2o&#34;&gt;安装H2O&lt;/h3&gt;
&lt;p&gt;下载安装最新版h2o  &lt;a href=&#34;https://github.com/h2o/h2o/releases&#34;&gt;https://github.com/h2o/h2o/releases&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#wget https://github.com/h2o/h2o/archive/v1.4.1.tar.gz
#tar zxf v1.4.1.tar.gz
#cd h2o-1.4.1
#cmake -DWITH_BUNDLED_SSL=on .
#make
#sudo make install
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;编辑h2o站点配置文件&#34;&gt;编辑H2O站点配置文件&lt;/h3&gt;
&lt;p&gt;以下是一个简单的http与https配置文件，可自行参考修改&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hosts:
&amp;quot;www.example.com&amp;quot;:
    listen:
    port: 80
    listen:
    port: 443
    ssl:
        certificate-file: /path/to/server-certificate.crt
        key-file:         /path/to/private-key.crt
    paths:
    &amp;quot;/&amp;quot;:
        file.dir: /path/to/doc-root

access-log: /path/to/the/access-log
error-log: /path/to/the/error-log
pid-file: /path/to/the/pid-file
http2-reprioritize-blocking-assets: ON   # performance tuning option
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;启动H2O&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#h2o h2o.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;以daemon模式启动&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#h2o -m daemon -c h2o.conf&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>